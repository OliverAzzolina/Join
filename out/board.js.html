<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>board.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#FilteredTasks">FilteredTasks</a></li><li><a href="global.html#activateCheckCancelButtons">activateCheckCancelButtons</a></li><li><a href="global.html#addAssignedEditors">addAssignedEditors</a></li><li><a href="global.html#addAssignedEditorsAddOverlay">addAssignedEditorsAddOverlay</a></li><li><a href="global.html#addNewTask">addNewTask</a></li><li><a href="global.html#addSubtask">addSubtask</a></li><li><a href="global.html#addSubtaskEditOverlay">addSubtaskEditOverlay</a></li><li><a href="global.html#addTask">addTask</a></li><li><a href="global.html#addUserToDatabase">addUserToDatabase</a></li><li><a href="global.html#addUserToUserContacts">addUserToUserContacts</a></li><li><a href="global.html#allowDrop">allowDrop</a></li><li><a href="global.html#awaitingFeedbackCounter">awaitingFeedbackCounter</a></li><li><a href="global.html#changeImage">changeImage</a></li><li><a href="global.html#changeImageDoneRight">changeImageDoneRight</a></li><li><a href="global.html#changeSubtask">changeSubtask</a></li><li><a href="global.html#changeTask">changeTask</a></li><li><a href="global.html#checkCategory">checkCategory</a></li><li><a href="global.html#checkEmail">checkEmail</a></li><li><a href="global.html#checkForEnter">checkForEnter</a></li><li><a href="global.html#checkForm">checkForm</a></li><li><a href="global.html#checkIfAssigned">checkIfAssigned</a></li><li><a href="global.html#checkIfBoardEmpty">checkIfBoardEmpty</a></li><li><a href="global.html#checkIfContactCheckboxChecked">checkIfContactCheckboxChecked</a></li><li><a href="global.html#checkIfEditorsExist">checkIfEditorsExist</a></li><li><a href="global.html#checkIfSubChecked">checkIfSubChecked</a></li><li><a href="global.html#checkIfSubsDone">checkIfSubsDone</a></li><li><a href="global.html#checkIfToMuchEditors">checkIfToMuchEditors</a></li><li><a href="global.html#checkIfToMuchEditorsDetail">checkIfToMuchEditorsDetail</a></li><li><a href="global.html#checkIfToMuchEditorsEdit">checkIfToMuchEditorsEdit</a></li><li><a href="global.html#checkIfUserAlreadyExists">checkIfUserAlreadyExists</a></li><li><a href="global.html#checkIfUserIdAlreadyExists">checkIfUserIdAlreadyExists</a></li><li><a href="global.html#checkName">checkName</a></li><li><a href="global.html#checkOpen">checkOpen</a></li><li><a href="global.html#checkOverlayCategory">checkOverlayCategory</a></li><li><a href="global.html#checkPasswords">checkPasswords</a></li><li><a href="global.html#checkPrivacyCheckbox">checkPrivacyCheckbox</a></li><li><a href="global.html#checkRemoteStorage">checkRemoteStorage</a></li><li><a href="global.html#checkRemoteStorageTasks">checkRemoteStorageTasks</a></li><li><a href="global.html#checkRemoteStorageUsers">checkRemoteStorageUsers</a></li><li><a href="global.html#checkboxAlert">checkboxAlert</a></li><li><a href="global.html#clearAssignedTo">clearAssignedTo</a></li><li><a href="global.html#clearAssignedToAddOverlay">clearAssignedToAddOverlay</a></li><li><a href="global.html#clearDataBase">clearDataBase</a></li><li><a href="global.html#clearSubtaskInput">clearSubtaskInput</a></li><li><a href="global.html#closeAddTaskCard">closeAddTaskCard</a></li><li><a href="global.html#closeDetailCard">closeDetailCard</a></li><li><a href="global.html#closeEditOverlay">closeEditOverlay</a></li><li><a href="global.html#createSubtasksDoneArray">createSubtasksDoneArray</a></li><li><a href="global.html#createSubtasksDoneArrayEditOverlay">createSubtasksDoneArrayEditOverlay</a></li><li><a href="global.html#deleteSubtask">deleteSubtask</a></li><li><a href="global.html#deleteSubtaskEditOverlay">deleteSubtaskEditOverlay</a></li><li><a href="global.html#deleteTask">deleteTask</a></li><li><a href="global.html#doNotClose">doNotClose</a></li><li><a href="global.html#doneCounter">doneCounter</a></li><li><a href="global.html#editSubtask">editSubtask</a></li><li><a href="global.html#editSubtaskEditOverlay">editSubtaskEditOverlay</a></li><li><a href="global.html#filterTasks">filterTasks</a></li><li><a href="global.html#findEditorInContacts">findEditorInContacts</a></li><li><a href="global.html#findUser">findUser</a></li><li><a href="global.html#formatDate">formatDate</a></li><li><a href="global.html#generateHeader">generateHeader</a></li><li><a href="global.html#generateLogin">generateLogin</a></li><li><a href="global.html#generateRandomColor">generateRandomColor</a></li><li><a href="global.html#generateRandomId">generateRandomId</a></li><li><a href="global.html#generateRegister">generateRegister</a></li><li><a href="global.html#generateSidebar">generateSidebar</a></li><li><a href="global.html#generateSubtasks">generateSubtasks</a></li><li><a href="global.html#generateSummary">generateSummary</a></li><li><a href="global.html#getCategoryValue">getCategoryValue</a></li><li><a href="global.html#getItem">getItem</a></li><li><a href="global.html#getSubTasksDone">getSubTasksDone</a></li><li><a href="global.html#getTaskArray">getTaskArray</a></li><li><a href="global.html#getUserArray">getUserArray</a></li><li><a href="global.html#getUserData">getUserData</a></li><li><a href="global.html#goHome">goHome</a></li><li><a href="global.html#greetingDaytime">greetingDaytime</a></li><li><a href="global.html#guestLogin">guestLogin</a></li><li><a href="global.html#hideDragHereContainer">hideDragHereContainer</a></li><li><a href="global.html#hideDropdownContacts">hideDropdownContacts</a></li><li><a href="global.html#hideDropdownContactsAdd">hideDropdownContactsAdd</a></li><li><a href="global.html#hideIcons">hideIcons</a></li><li><a href="global.html#hideSubInfo">hideSubInfo</a></li><li><a href="global.html#hover">hover</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#inputAlert">inputAlert</a></li><li><a href="global.html#loadContactList">loadContactList</a></li><li><a href="global.html#loadContactsForAddOverlay">loadContactsForAddOverlay</a></li><li><a href="global.html#loadLoginListeners">loadLoginListeners</a></li><li><a href="global.html#loadRegisterListeners">loadRegisterListeners</a></li><li><a href="global.html#loadTaskData">loadTaskData</a></li><li><a href="global.html#loadTasksfromStorage">loadTasksfromStorage</a></li><li><a href="global.html#loadUserContacts">loadUserContacts</a></li><li><a href="global.html#loginUser">loginUser</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#logoutRemoteArray">logoutRemoteArray</a></li><li><a href="global.html#moveTo">moveTo</a></li><li><a href="global.html#notToMuchEditors">notToMuchEditors</a></li><li><a href="global.html#notToMuchEditorsDetail">notToMuchEditorsDetail</a></li><li><a href="global.html#notToMuchEditorsEdit">notToMuchEditorsEdit</a></li><li><a href="global.html#openAddTaskCard">openAddTaskCard</a></li><li><a href="global.html#openChangeTaskPopup">openChangeTaskPopup</a></li><li><a href="global.html#openEditOverlay">openEditOverlay</a></li><li><a href="global.html#openTaskDetails">openTaskDetails</a></li><li><a href="global.html#pushAssignedTo">pushAssignedTo</a></li><li><a href="global.html#refreshTasks">refreshTasks</a></li><li><a href="global.html#registerUser">registerUser</a></li><li><a href="global.html#removeAllAlerts">removeAllAlerts</a></li><li><a href="global.html#removeInitFadeIn">removeInitFadeIn</a></li><li><a href="global.html#removeInputAlert">removeInputAlert</a></li><li><a href="global.html#removeLogoTransition">removeLogoTransition</a></li><li><a href="global.html#renderAssignedTo">renderAssignedTo</a></li><li><a href="global.html#renderAssignedToCards">renderAssignedToCards</a></li><li><a href="global.html#renderAssignedToDetail">renderAssignedToDetail</a></li><li><a href="global.html#renderAssignedToEdit">renderAssignedToEdit</a></li><li><a href="global.html#renderDetailSubtasks">renderDetailSubtasks</a></li><li><a href="global.html#renderEditSubtasks">renderEditSubtasks</a></li><li><a href="global.html#renderFilteredTasks">renderFilteredTasks</a></li><li><a href="global.html#renderSubtasks">renderSubtasks</a></li><li><a href="global.html#renderTasks">renderTasks</a></li><li><a href="global.html#resetColors">resetColors</a></li><li><a href="global.html#resetImage">resetImage</a></li><li><a href="global.html#resetImageDoneRight">resetImageDoneRight</a></li><li><a href="global.html#resetPrioColors">resetPrioColors</a></li><li><a href="global.html#resetTaskArray">resetTaskArray</a></li><li><a href="global.html#resetUserArray">resetUserArray</a></li><li><a href="global.html#saveNewAddedTask">saveNewAddedTask</a></li><li><a href="global.html#saveTask">saveTask</a></li><li><a href="global.html#setAssigned">setAssigned</a></li><li><a href="global.html#setChecked">setChecked</a></li><li><a href="global.html#setGuestUser">setGuestUser</a></li><li><a href="global.html#setItem">setItem</a></li><li><a href="global.html#setNewTaskPrio">setNewTaskPrio</a></li><li><a href="global.html#setPrio">setPrio</a></li><li><a href="global.html#setPrioDetailImg">setPrioDetailImg</a></li><li><a href="global.html#setPrioImg">setPrioImg</a></li><li><a href="global.html#setUnAssigned">setUnAssigned</a></li><li><a href="global.html#setUnChecked">setUnChecked</a></li><li><a href="global.html#showDragHereContainer">showDragHereContainer</a></li><li><a href="global.html#showDropdownContacts">showDropdownContacts</a></li><li><a href="global.html#showDropdownContactsAddOverlay">showDropdownContactsAddOverlay</a></li><li><a href="global.html#showEditPrio">showEditPrio</a></li><li><a href="global.html#showIcons">showIcons</a></li><li><a href="global.html#showMessageOverlay">showMessageOverlay</a></li><li><a href="global.html#showPrio">showPrio</a></li><li><a href="global.html#showSubInfo">showSubInfo</a></li><li><a href="global.html#showUsersOnRemoteStorage">showUsersOnRemoteStorage</a></li><li><a href="global.html#slideOutOverlay">slideOutOverlay</a></li><li><a href="global.html#startDragging">startDragging</a></li><li><a href="global.html#stopDragging">stopDragging</a></li><li><a href="global.html#switchToLogin">switchToLogin</a></li><li><a href="global.html#switchToRegister">switchToRegister</a></li><li><a href="global.html#tibCounter">tibCounter</a></li><li><a href="global.html#tipCounter">tipCounter</a></li><li><a href="global.html#toDoCounter">toDoCounter</a></li><li><a href="global.html#toggleDropdown">toggleDropdown</a></li><li><a href="global.html#toggleFadeIn">toggleFadeIn</a></li><li><a href="global.html#toggleFadeOut">toggleFadeOut</a></li><li><a href="global.html#unhover">unhover</a></li><li><a href="global.html#updateDoneSubs">updateDoneSubs</a></li><li><a href="global.html#urgentCounter">urgentCounter</a></li><li><a href="global.html#urgentDeadline">urgentDeadline</a></li><li><a href="global.html#userGreetingName">userGreetingName</a></li><li><a href="global.html#userIsAllowed">userIsAllowed</a></li><li><a href="global.html#userIsLoggedIn">userIsLoggedIn</a></li><li><a href="global.html#validateEmail">validateEmail</a></li><li><a href="global.html#validateForm">validateForm</a></li><li><a href="global.html#validateName">validateName</a></li><li><a href="global.html#validatePassword">validatePassword</a></li><li><a href="global.html#validatePrivacyCheckbox">validatePrivacyCheckbox</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">board.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>let currentDraggedElement;


/**
 * Initializes the board page by running a series of asynchronous tasks in sequence.
 * Waits for each task to complete before moving to the next. The tasks include checking user permissions,
 * loading user data, generating the header and sidebar UI components, sorting contacts, and loading tasks from storage.
 */
async function init(){
    await userIsAllowed();
    await loadUserData();
    await generateHeader(userInitials);
    await generateSidebar();
    sortContacts();
    loadTasksfromStorage();
}

/**
 * Asynchronously loads tasks from storage and parses them into the `tasks` variable.
 * It tries to retrieve and parse the 'tasks' item from storage. If successful, it logs the loaded tasks.
 * In case of an error, it catches and logs the error as a warning. Finally, it calls `renderTasks` to update the UI.
 */
async function loadTasksfromStorage(){
  try{
    tasks = JSON.parse(await getItem('tasks'));
    console.log('tasks loaded from storage', tasks)
  }catch(e){
    console.warn('loading error:', e)
  }
  renderTasks();
}

/**
 * Populates the contact list in the UI with contacts data.
 * Iterates through the `contacts` array, creating an HTML representation for each contact that includes their
 * initials, name, and user color. This representation is then appended to the contact list element in the UI.
 * After populating the list, it calls `sortContacts` to order the contacts.
 */
function loadContactList(){
  let contactList = document.getElementById('assigned-editors');
  for (let i = 0; i &lt; contacts.length; i++) {
      //let initials = contacts[i]['name'].split(" ").map((n)=>n[0]).join("");
      let contact = contacts[i];
      let initials = contact.firstName.charAt(0) + contact.lastName.charAt(0);
      let userColor = contact.userColor;
      let firstName = contact.firstName;
      let lastName = contact.lastName;
      let userId = contact.userId;
      contactList.innerHTML += renderContacts(i, userColor, firstName, lastName, initials);
  }
    sortContacts();
}


/**
 * Asynchronously checks if the editors assigned to tasks still exist in the contacts list.
 * Iterates through each task and its assigned editors, verifying if each editor exists in the contacts.
 * If an editor does not exist in the contacts, they are removed from the task's assignedTo list.
 */
async function checkIfEditorsExist(){
  for (let i = 0; i &lt; tasks.length; i++) {
    const task = tasks[i];
    for (let j = 0; j &lt; task.assignedTo.length; j++) {
      const editor = task.assignedTo[j].userId;
      let contact = await findEditorInContacts(editor);
      if(!contact){
        tasks[i].assignedTo.splice(j, 1);
      }
    }
  }
}


/**
 * Asynchronously searches for an editor in the contacts list by user ID.
 * It returns the contact object if a matching user ID is found, otherwise returns undefined.
 *
 * @param {string} editor - The user ID of the editor to search for in the contacts list.
 * @returns {Promise&lt;Object|undefined>} A promise that resolves to the contact object if found, or undefined if not found.
 */
async function findEditorInContacts(editor){ 
    return contacts.find(contact => contact.userId === parseInt(editor));
}


/**
 * Asynchronously renders tasks on the UI after verifying the existence of their assigned editors.
 * It first checks if the assigned editors for each task exist, refreshes the tasks list, and then iterates
 * through the tasks array to render each task based on its status. It also sets priority images, updates
 * completed subtasks, generates subtasks, checks task categories, and renders the assigned editors for each task.
 * Finally, it checks if the task board is empty and updates the UI accordingly.
 */
async function renderTasks() {
  await checkIfEditorsExist();
  refreshTasks();
  for (let i = 0; i &lt; tasks.length; i++) {
    let status = tasks[i]["status"];
    if (status == status) {
      document.getElementById(`${status}`).innerHTML += generateTask(i);
      setPrioImg(i);
      updateDoneSubs(i);
      generateSubtasks(i);
      checkCategory(i);
      renderAssignedTo(i);
    }
  }
  checkIfBoardEmpty();
}


/**
 * Checks if each board section is empty and updates the display accordingly.
 * Calls `checkOpen` for each task status ('open', 'in-progress', 'await-feedback', 'done')
 * to verify if there are any tasks in these categories and updates the UI to reflect the current state.
 */
function checkIfBoardEmpty(){
  checkOpen('open');
  checkOpen('in-progress');
  checkOpen('await-feedback');
  checkOpen('done');
}


/**
 * Checks if a checkbox is checked and calls corresponding functions to update its state.
 * @param {number} i - The index number of the checkbox.
 */
function checkIfAssigned(i){
  let checkbox = document.getElementById(`checkbox${i}`).checked;
  if(checkbox == false){
    setUnAssigned(i); 
  }

  if(checkbox == true){
    setAssigned(i);
  }
}


/**
 * Sets the assigned state for a given element identified by index.
 * @param {number} i - The index number of the element.
 */
function setAssigned(i){
  document.getElementById(`assigned-contact${i}`).style = "background-color: #2A3647; color: white";
  document.getElementById(`checked${i}`).src ="assets/img/check_checked.png";
}


/**
 * Sets the unassigned state for a given element identified by index.
 * @param {number} i - The index number of the element.
 */
function setUnAssigned(i){
  document.getElementById(`assigned-contact${i}`).style = "color: black";;
  document.getElementById(`checked${i}`).src ="assets/img/check_unchecked.png";
}


/**
 * Displays a dropdown list of contacts and shows a overlay.
 * @param {number} index - The index of the dropdown.
 */
function showDropdownContacts(index){
  let dropdown = document.getElementById('assigned-editors');
  let backgroundOverlay = document.getElementById('background-overlay');
  if(dropdown.style.display == 'none'){
    dropdown.style.display = 'block';
    backgroundOverlay.style.display = 'block';
    clearAssignedTo(index);
    document.getElementById(`tooMuchEditorsEdit${index}`).style.display = 'none';
  }else{
    hideDropdownContacts(index);
  } 
}


/**
 * Hides the dropdown list of contacts and removes the background overlay.
 * @param {number} index - The index of the dropdown.
 */
function hideDropdownContacts(index){
  let dropdown = document.getElementById('assigned-editors');
  let backgroundOverlay = document.getElementById('background-overlay');
  dropdown.style.display = "none";
  backgroundOverlay.style.display = 'none';
  addAssignedEditors(index);
}



/**
 * Adds assigned editors to the display and updates associated data.
 * @param {number} index - The index associated with the dropdown.
 */
function addAssignedEditors(index){
  let showAssignedEditors = document.getElementById('show-assigned-editors-edit-container');
  for (let i = 0; i &lt; contacts.length; i++) {
    const checkedEditor = contacts[i];
    let checkbox = document.getElementById(`checkbox${i}`).checked;
    if(checkbox == true){
      let firstName = checkedEditor.firstName;
      let lastName = checkedEditor.lastName;
      let userColor = checkedEditor.userColor;
      let initials = checkedEditor.firstName[0] + checkedEditor.lastName[0];
      let userId = checkedEditor.userId;
      showAssignedEditors.innerHTML += `
      &lt;div id="editor${i}" class="drop-initials" style="background-color: ${userColor}">${initials}&lt;/div>
      `;
      pushAssignedTo(index, initials, userColor, firstName, lastName, userId);
    }
  }
}


/**
 * Renders the assigned editors for a specific task.
 * @param {number} index - The index of the task.
 */
function renderAssignedTo(index){
  let assignedTo = document.getElementById(`todo-assigned-to${index}`);
  assignedTo.innerHTML = '';
    if(tasks[index]['assignedTo'].length > 3){
      checkIfToMuchEditors(assignedTo, index);
    
    }else {
      notToMuchEditors(assignedTo, index);
    }
  }


/**
 * Checks if there are too many assigned editors for a task and renders a limited number of them.
 * @param {HTMLElement} assignedTo - The HTML element to render the assigned editors.
 * @param {number} index - The index of the task.
 */
function checkIfToMuchEditors(assignedTo, index){
  for (let i = 0; i &lt; 3; i++) {
    const checkedEditor = tasks[index]['assignedTo'][i];
    let initials = checkedEditor.initials;
    let userColor = checkedEditor.userColor;
    let tooMuchEditors = document.getElementById(`tooMuchEditors${index}`);
    tooMuchEditors.style.display = 'flex';
    tooMuchEditors.innerHTML = `+${tasks[index]['assignedTo'].length - 3}`;
  
    assignedTo.innerHTML += `
    &lt;div id="mini-logo${i}" style="background-color: ${userColor}" class="mini-logo">${initials}&lt;/div>
    `;
  }
}


/**
 * Renders assigned editors when the number of editors is not excessive for a task.
 * @param {HTMLElement} assignedTo - The HTML element to render the assigned editors.
 * @param {number} index - The index of the task.
 */
function notToMuchEditors(assignedTo, index){
  for (let i = 0; i &lt; tasks[index]['assignedTo'].length; i++) {
    const checkedEditor = tasks[index]['assignedTo'][i];
    let initials = checkedEditor.initials;
    let userColor = checkedEditor.userColor;
    assignedTo.innerHTML += `
    &lt;div id="mini-logo${i}" style="background-color: ${userColor}" class="mini-logo">${initials}&lt;/div>
    `;
  }
}


/**
 * Checks if a specific board section is empty and adjusts its visibility accordingly.
 * @param {string} id - The ID of the board section to check.
 */
function checkOpen(id){
let board = document.getElementById(`${id}`);
    if(board.innerHTML == ''){
      document.getElementById(`${id}-empty`).style.display = "flex";
      document.getElementById(`${id}`).style.display = "none";
     }else{
      document.getElementById(`${id}-empty`).style.display = "none";
      document.getElementById(`${id}`).style.display = "flex";
     }
}


/**
 * Checks the category of a task and adjusts the background color accordingly.
 * @param {number} i - The index of the task.
 */
function checkCategory(i){
  let category = tasks[i]["category"];
  if(category == 'User Story'){
    document.getElementById(`category${i}`).style.backgroundColor = "rgb(0,56,255)";
  }
  if(category == 'Technical Task'){
    document.getElementById(`category${i}`).style.backgroundColor = "rgb(31,215,193)";
  }
}


/**
 * Refreshes the task boards by clearing their contents.
 */
function refreshTasks(){
  document.getElementById("open").innerHTML = '';
  document.getElementById("in-progress").innerHTML = '';
  document.getElementById("await-feedback").innerHTML = '';
  document.getElementById("done").innerHTML = '';
}


/**
 * Sets the priority image for a task based on its priority level.
 * @param {number} i - The index of the task.
 */
function setPrioImg(i){
  let prioImg = document.getElementById(`prioImg${i}`);
  let prio = tasks[i]['prio'];
  prioImg.src =`/assets/img/prio_${prio}_icon.png`;
}


/**
 * Generates subtasks progress for a given task.
 * @param {number} i - The index of the task.
 */
function generateSubtasks(i){
  let subProgressBar = document.getElementById(`subtasks-progress${i}`);
  subProgressBar.innerHTML = '';
  let subTasksDone = tasks[i]['subTasksDone'];
  let checkedTrue = 0
  for (let j = 0; j &lt; subTasksDone.length; j++) {
    if(subTasksDone[j].checked == true){
      checkedTrue++;
    }
  }
  let openSubTasks = tasks[i]['subtasks'].length;
  let percent = checkedTrue / openSubTasks * 100;
  subProgressBar.style.width = percent + '%';
  updateDoneSubs(i, checkedTrue)
}


/**
 * Updates the information about completed subtasks for a given task.
 * @param {number} i - The index of the task.
 * @param {number} checkedTrue - The number of subtasks that are checked (completed).
 */
function updateDoneSubs(i, checkedTrue){
  if(checkedTrue == undefined){
    document.getElementById(`subsDoneOfAll${i}`).innerHTML = '0';
  }else{
    document.getElementById(`subsDoneOfAll${i}`).innerHTML =`${checkedTrue}`;
  }
  let subTasksDone = tasks[i]['subTasksDone'];
  let subInfo = document.getElementById(`subtasks-info${i}`);
  subInfo.innerHTML = ``;
  subInfo.innerHTML = `${checkedTrue} von ${subTasksDone.length} Subtasks erledigt.`;

}


/**
 * Displays information about subtasks for a given task.
 * @param {number} i - The index of the task.
 */
function showSubInfo(i){
  let subInfo = document.getElementById(`subtasks-info${i}`);
  subInfo.style.display = 'block';
}


/**
 * Hides information about subtasks for a given task.
 * @param {number} i - The index of the task.
 */
function hideSubInfo(i){
  let subInfo = document.getElementById(`subtasks-info${i}`);
  subInfo.style.display = 'none';
}


/**
 * Initiates the dragging process for a todo card element.
 * @param {number} i - The index of the todo card being dragged.
 */
function startDragging(i){
 currentDraggedElement = i;
 document.getElementById(`todo-card${i}`).classList.add('todo-card-dragging');
 showDragHereContainer();
}


/**
 * Ends the dragging process for a todo card element.
 * @param {number} i - The index of the todo card being dragged.
 */
function stopDragging(i){
  document.getElementById(`todo-card${i}`).classList.remove('todo-card-dragging');
}


/**
 * Displays the "Drag Here" container.
 */
function showDragHereContainer(){
  let dragContainer = document.getElementsByClassName('drag-here-container');
  for (let i = 0; i &lt; dragContainer.length; i++) {
      const element = dragContainer[i];
      element.style.display = 'flex';
    }
}


/**
 * Hides the "Drag Here" container.
 */
function hideDragHereContainer(){
  let dragContainer = document.getElementsByClassName('drag-here-container');
  for (let i = 0; i &lt; dragContainer.length; i++) {
      const element = dragContainer[i];
      element.style.display = 'none'
    }
}


/**
 * Allows dropping elements into a drop zone.
 * @param {Event} ev - The dragover event.
 */
function allowDrop(ev){
  ev.preventDefault();
}


/**
 * Moves the current dragged element to a new status.
 * @param {string} status - The status to move the element to.
 */
function moveTo(status){
  hideDragHereContainer();
  tasks[currentDraggedElement]['status'] = status;
  setItem('tasks', JSON.stringify(tasks));
  refreshTasks();
  renderTasks();
}


/**
 * Slides out the overlay for a todo card detail.
 * @param {number} i - The index of the todo card detail.
 */
function slideOutOverlay(i){

    var $slider = document.getElementById(`todo-card-detail${i}`);
    var $toggle = document.getElementById(`slide-out-toggle${i}`);
    
    $toggle.addEventListener('click', function() {
        var isOpen = $slider.classList.contains('slide-in');
    
        $slider.setAttribute('class', isOpen ? 'slide-out' +' '+ 'detail-todo-card' +' '+ 'slider'  : 'slide-in');
       setTimeout(()=>{closeDetailCard()},170); 
    });
}


/**
 * Pushes assigned editor details to a task.
 * @param {number} index - The index of the task.
 * @param {string} initials - The initials of the assigned editor.
 * @param {string} userColor - The color associated with the assigned editor.
 * @param {string} firstName - The first name of the assigned editor.
 * @param {string} lastName - The last name of the assigned editor.
 * @param {string} userId - The ID of the assigned editor.
 */
function pushAssignedTo(index, initials, userColor, firstName, lastName, userId){
  let assignedToTask = {
    firstName: firstName,
    lastName: lastName,
    initials: initials,
    userColor: userColor,
    userId: userId
  };
  tasks[index]['assignedTo'].push(assignedToTask);
  renderAssignedToCards(index);
}


/**
 * Renders assigned editor cards for a task.
 * @param {number} index - The index of the task.
 */
function renderAssignedToCards(index){
  let showAssignedEditors = document.getElementById('show-assigned-editors-container');
  for (let i = 0; i &lt; tasks[index]['assignedTo'].length; i++) {
    const checkedEditor = tasks[index]['assignedTo'][i];
    let initials = checkedEditor.initials;
    let userColor = checkedEditor.userColor;
    showAssignedEditors.innerHTML += generateAssignedTo(i, userColor, initials);
  }
}


/**
 * Displays the priority of a task.
 * @param {number} i - The index of the task.
 */
function showPrio(i){
 let newPrio = tasks[i]['prio'];
 if(newPrio == 'urgent'){
    document.getElementById(newPrio).style.backgroundColor = "#FF3D00"
    }else if(newPrio == 'medium'){
    document.getElementById(newPrio).style.backgroundColor = "#FFA800"
    }else if(newPrio == 'low'){
    document.getElementById(newPrio).style.backgroundColor = "#7AE229"
  }
}


/**
 * Filters tasks based on the search input.
 */
function filterTasks() {
  let search = document.getElementById("search").value.toLowerCase();
  let searchSection = document.getElementById(`search-section`);
  let boardSection = document.getElementById('board-section');
  searchSection.innerHTML = '';
  refreshTasks();
  if (search == "") {
    boardSection.style.display = 'flex';
    searchSection.innerHTML = '';
    renderTasks();
  }else{
    FilteredTasks(search);
  }
}


/**
 * Filters tasks based on the search input and renders filtered tasks.
 * @param {string} search - The search query.
 */
function FilteredTasks(search){ 
  refreshTasks();
  for (let i = 0; i &lt; tasks.length; i++) {
    let title = tasks[i]['title'].toLowerCase();
    let description = tasks[i]['description'].toLowerCase();
    let boardSection = document.getElementById('board-section');
    if (title.toLowerCase().includes(search)||description.toLowerCase().includes(search)) {
      boardSection.style.display = 'none';
      renderFilteredTasks(i);
    }else{
      boardSection.style.display = 'none';
      document.getElementById(`search-section`).innerHTML = '&lt;div>No tasks found&lt;/div>';
    }
  }
}


/**
 * Renders filtered tasks in the search section.
 * @param {number} i - The index of the task to render.
 */
function renderFilteredTasks(i){
  document.getElementById(`search-section`).innerHTML += generateTask(i);
  setPrioImg(i);
  updateDoneSubs(i);
  generateSubtasks(i);
  checkCategory(i);
  renderAssignedTo(i);
}


/**
 * Handles hover effect for buttons by changing their image source.
 * @param {string} id - The ID of the button.
 */
function hover(id){
  let button = document.getElementById(id);
  if(id == 'edit-img'){
    button.setAttribute('src', 'assets/img/edit_hover_icon.png');
  }else 
  if(id == 'change-img'){
    button.setAttribute('src', 'assets/img/change_hover.png');
  }else
  if(id == 'delete-img'){
    button.setAttribute('src', 'assets/img/delete_hover_icon.png');
  }else{
    document.getElementById(id).setAttribute('src', 'assets/img/plus_hover_icon.png');
  }
}


/**
 * Handles unhover effect for buttons by restoring their original image source.
 * @param {string} id - The ID of the button.
 */
function unhover(id){
  let button = document.getElementById(id);
  if(id == 'edit-img'){
    button.setAttribute('src', 'assets/img/edit_icon.png');
  }else  
  if(id == 'change-img'){
    button.setAttribute('src', 'assets/img/change_unhovered.png');
  }else
  if(id == 'delete-img'){
    button.setAttribute('src', 'assets/img/delete_icon.png');
  }else{
    document.getElementById(id).setAttribute('src', 'assets/img/plus_icon.png');
  }
}


/**
 * Prevents the event from bubbling up the DOM tree, stopping further propagation.
 * @param {Event} event - The event object.
 */
function doNotClose(event){
  event.stopPropagation();
}

/**
 * Listens for keydown events and prevents form submission when Enter key is pressed.
 * @param {Event} e - The keydown event object.
 */ 
window.addEventListener('keydown',function(e) {
  if (e.keyIdentifier=='U+000A' || e.keyIdentifier=='Enter' || e.keyCode==13) {
      if (e.target.nodeName=='INPUT' &amp;&amp; e.target.type=='text') {
          e.preventDefault();

          return false;
      }
  }
}, true);


function checkForEnter(e){
  if(e.keyCode == 13 || e.which == 13){
    addSubtask();
  }
}</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Tue Mar 12 2024 00:35:54 GMT+0100 (Mitteleurop√§ische Normalzeit) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
